# PostgreSQL Database Tool - 用户指南

## 目录

1. [快速开始](#快速开始)
2. [配置管理](#配置管理)
3. [数据库导出](#数据库导出)
4. [数据库导入](#数据库导入)
5. [数据库资源管理器](#数据库资源管理器)
6. [主题设置](#主题设置)
7. [常见问题](#常见问题)

## 快速开始

### 首次使用

1. **启动应用**
   - 双击应用图标启动
   - 或在命令行运行 `bun run dev`（开发模式）

2. **配置数据库连接**
   - 点击左侧导航栏的"配置"
   - 点击"添加连接"按钮
   - 填写数据库连接信息
   - 保存配置

3. **开始使用**
   - 返回首页
   - 选择要使用的功能

## 配置管理

### 添加数据库连接

1. 打开"配置"页面
2. 点击"添加连接"按钮
3. 填写以下信息：
   - **名称**: 连接的显示名称（如"本地开发"）
   - **主机**: 数据库服务器地址（如 localhost）
   - **端口**: 数据库端口（默认 5432）
   - **用户名**: 数据库用户名
   - **密码**: 数据库密码
   - **默认连接**: 是否设为默认连接
4. 点击"添加"保存

### 编辑连接

1. 在连接列表中找到要编辑的连接
2. 点击"编辑"按钮
3. 修改信息
4. 点击"保存"

### 删除连接

1. 在连接列表中找到要删除的连接
2. 点击"删除"按钮
3. 确认删除操作

### 设置默认连接

1. 在连接列表中找到要设为默认的连接
2. 点击"设为默认"按钮
3. 该连接将在其他页面自动选中

## 数据库导出

### 导出数据库

1. 打开"数据库导出"页面
2. 点击"加载数据库列表"按钮
3. 从下拉列表中选择要导出的数据库
4. 点击"导出数据库"按钮
5. 等待导出完成
6. 查看导出结果和文件路径

### 导出文件位置

导出的文件保存在：
- Windows: `C:\Users\<用户名>\pg-db-tool-exports\`
- macOS/Linux: `~/pg-db-tool-exports/`

### 导出文件格式

导出文件使用 PostgreSQL 自定义格式（.backup），包含：
- 数据库结构（表、索引、约束等）
- 所有数据
- 压缩存储

### 导出历史

页面底部显示最近 5 次导出记录，包括：
- 数据库名称
- 导出时间
- 文件路径

## 数据库导入

### 导入数据库

1. 打开"数据库导入"页面
2. 点击"选择备份文件"按钮
3. 选择备份文件（支持 .backup、.sql、.gz 格式）
4. 输入目标数据库名称（自动从文件名提取）
5. 点击"导入数据库"按钮
6. 确认导入操作
7. 等待导入完成
8. 查看导入结果

### 支持的文件格式

- **.backup**: PostgreSQL 自定义格式（推荐）
- **.sql**: SQL 脚本文件
- **.gz**: 压缩的 SQL 文件

### 重要提示

⚠️ **注意事项**：
- 如果目标数据库已存在，将会被删除并重新创建
- 导入过程可能需要几分钟，请耐心等待
- 请确保备份文件完整且未损坏
- 建议先在测试环境中测试导入

### 导入历史

页面底部显示最近 5 次导入记录，包括：
- 数据库名称
- 文件名
- 导入时间
- 导入状态（成功/失败）

## 数据库资源管理器

### 浏览数据库

1. 打开"数据库资源管理器"页面
2. 点击"加载数据库列表"按钮
3. 从下拉列表中选择数据库
4. 左侧显示该数据库的所有表

### 查看表数据

1. 在左侧表列表中点击要查看的表
2. 右侧显示表数据
3. 使用分页控件浏览数据
4. 可以调整每页显示的行数（10/20/50/100）

### 创建新记录

1. 选择要操作的表
2. 点击"新增"按钮
3. 在弹出的表单中填写数据
4. 点击"创建"保存

### 编辑记录

1. 在数据表格中找到要编辑的记录
2. 点击该行的"编辑"按钮
3. 在弹出的表单中修改数据
4. 点击"保存"

**注意**: 主键字段（标记为 PK）不能修改

### 删除记录

1. 在数据表格中找到要删除的记录
2. 点击该行的"删除"按钮
3. 确认删除操作

⚠️ **警告**: 删除操作不可恢复，请谨慎操作！

### 刷新数据

点击表格右上角的"刷新"按钮可以重新加载数据。

### 表信息

表列表显示以下信息：
- **表名**: 表的名称
- **Schema**: 表所属的模式
- **行数**: 表中的记录数（估算值）

## 主题设置

### 切换主题

1. 点击顶部标题栏右侧的主题切换按钮
   - 🌙 月亮图标 = 切换到暗色主题
   - ☀️ 太阳图标 = 切换到亮色主题
2. 主题设置会自动保存
3. 下次启动应用时自动应用上次选择的主题

### 主题特性

- **亮色主题**: 适合白天使用，清晰明亮
- **暗色主题**: 适合夜间使用，保护眼睛

## 常见问题

### Q: 如何连接到远程数据库？

A: 在配置管理中添加连接时，将主机地址设置为远程服务器的 IP 地址或域名。

### Q: 导出的文件在哪里？

A: 导出文件保存在 `~/pg-db-tool-exports/` 目录。导出完成后会显示完整路径。

### Q: 导入失败怎么办？

A: 检查以下几点：
1. 备份文件是否完整
2. 数据库用户是否有足够的权限
3. 目标数据库名称是否正确
4. 查看错误消息了解具体原因

### Q: 如何备份多个数据库？

A: 需要分别导出每个数据库。建议使用有意义的文件名以便区分。

### Q: 可以同时连接多个数据库吗？

A: 可以配置多个连接，但同一时间只能使用一个连接。

### Q: 数据库资源管理器支持哪些操作？

A: 支持基本的 CRUD 操作：
- 创建（Create）新记录
- 读取（Read）表数据
- 更新（Update）现有记录
- 删除（Delete）记录

### Q: 如何查看大表的数据？

A: 使用分页功能，可以调整每页显示的行数。建议从小的页面大小开始。

### Q: 主题设置保存在哪里？

A: 主题设置保存在浏览器的 localStorage 中，会自动持久化。

### Q: 配置信息保存在哪里？

A: 配置信息保存在浏览器的 localStorage 中。如果需要在不同设备间同步，需要手动导出/导入配置。

### Q: 如何重置所有设置？

A: 清除浏览器的 localStorage 即可重置所有设置。

### Q: 支持哪些 PostgreSQL 版本？

A: 支持 PostgreSQL 9.x 及以上版本。建议使用 PostgreSQL 12 或更高版本。

### Q: 如何报告问题或建议？

A: 请在项目的 GitHub 仓库中提交 Issue。

## 快捷键

目前应用不支持快捷键，所有操作通过鼠标点击完成。

## 性能建议

### 处理大数据量

1. **导出大数据库**: 可能需要较长时间，请耐心等待
2. **查看大表**: 使用较小的页面大小（如 10 或 20）
3. **批量操作**: 目前不支持批量操作，需要逐条处理

### 优化建议

1. 定期清理不需要的连接配置
2. 导出文件定期备份到其他位置
3. 大表查询时使用合适的页面大小

## 安全建议

1. **密码安全**: 配置中的密码以明文存储在 localStorage，请注意安全
2. **权限控制**: 使用具有适当权限的数据库用户
3. **备份重要数据**: 在进行导入操作前，请先备份重要数据
4. **测试环境**: 建议先在测试环境中测试导入/导出功能

## 技术支持

如需技术支持，请：
1. 查看本用户指南
2. 查看项目 README 文档
3. 在 GitHub 上提交 Issue
4. 联系项目维护者

## 更新日志

### v0.1.0 (2026-02-04)
- ✅ 初始版本发布
- ✅ 配置管理功能
- ✅ 数据库导出功能
- ✅ 数据库导入功能
- ✅ 数据库资源管理器
- ✅ 主题切换功能

---

**版本**: 0.1.0  
**最后更新**: 2026-02-04  
**文档语言**: 简体中文
